<!DOCTYPE html>
<html>
<head>
    <title>QR Code Generator</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <div class="container">
        <h1>Custom QR Generator</h1>
        
        <div style="display: flex; gap: 10px; margin-bottom: 20px; justify-content: center;">
            <button onclick="toggleType('url')" id="btn-url" style="padding: 10px 20px; font-size: 14px;">URL</button>
            <button onclick="toggleType('vcard')" id="btn-vcard" style="padding: 10px 20px; font-size: 14px; background: #f1f5f9; color: var(--text);">vCard</button>
            <button onclick="window.location.href='/viewer'" style="padding: 10px 20px; font-size: 14px; background: #f1f5f9; color: var(--text);">QR Viewer</button>
            <button onclick="window.location.href='/vcard-viewer'" style="padding: 10px 20px; font-size: 14px; background: #f1f5f9; color: var(--text);">vCard Viewer</button>
        </div>

        <form action="/generate" method="POST" enctype="multipart/form-data" id="qr-form">
            <input type="hidden" name="type" id="qr-type" value="url">
            
            <div id="url-fields" class="input-group">
                <input type="url" name="url" placeholder="Enter URL (https://...)" id="url-input" required>
            </div>

            <div id="vcard-fields" class="input-group" style="display: none;">
                <input type="text" name="first_name" placeholder="First Name">
                <input type="text" name="last_name" placeholder="Last Name">
                <div id="phone-container" style="display: flex; flex-direction: column; gap: 8px;">
                    <div style="display: flex; gap: 8px;">
                        <input type="tel" name="phone[]" placeholder="Phone Number" style="flex: 1;">
                        <button type="button" onclick="addField('phone-container', 'phone[]', 'tel', 'Phone Number')" style="padding: 10px; width: 44px;">+</button>
                    </div>
                </div>
                <div id="email-container" style="display: flex; flex-direction: column; gap: 8px;">
                    <div style="display: flex; gap: 8px;">
                        <input type="email" name="email[]" placeholder="Email Address" style="flex: 1;">
                        <button type="button" onclick="addField('email-container', 'email[]', 'email', 'Email Address')" style="padding: 10px; width: 44px;">+</button>
                    </div>
                </div>
                <input type="text" name="org" placeholder="Organization">
            </div>

            <div class="options">
                <label>Foreground <input type="color" name="fg_color" value="#4f46e5"></label>
                <label>Background <input type="color" name="bg_color" value="#ffffff"></label>
                <label>Expires (days) <input type="number" name="expiry_days" min="1" placeholder="Optional"></label>
                <label>Custom Logo <input type="file" name="logo" accept="image/png"></label>
            </div>
            <button type="submit" id="submit-btn">Generate Magic QR</button>
        </form>

        <script>
            function addField(containerId, name, type, placeholder) {
                const container = document.getElementById(containerId);
                const div = document.createElement('div');
                div.style.display = 'flex';
                div.style.gap = '8px';
                div.innerHTML = `
                    <input type="${type}" name="${name}" placeholder="${placeholder}" style="flex: 1;">
                    <button type="button" onclick="this.parentElement.remove()" style="padding: 10px; width: 44px; background: #ef4444;">-</button>
                `;
                container.appendChild(div);
            }

            function toggleType(type) {
                document.getElementById('qr-type').value = type;
                const urlFields = document.getElementById('url-fields');
                const vcardFields = document.getElementById('vcard-fields');
                const urlInput = document.getElementById('url-input');
                const btnUrl = document.getElementById('btn-url');
                const btnVcard = document.getElementById('btn-vcard');
                const submitBtn = document.getElementById('submit-btn');

                if (type === 'url') {
                    urlFields.style.display = 'block';
                    vcardFields.style.display = 'none';
                    urlInput.required = true;
                    btnUrl.style.background = 'var(--primary)';
                    btnUrl.style.color = 'white';
                    btnVcard.style.background = '#f1f5f9';
                    btnVcard.style.color = 'var(--text)';
                    submitBtn.textContent = 'Generate Magic QR';
                } else {
                    urlFields.style.display = 'none';
                    vcardFields.style.display = 'block';
                    urlInput.required = false;
                    btnVcard.style.background = 'var(--primary)';
                    btnVcard.style.color = 'white';
                    btnUrl.style.background = '#f1f5f9';
                    btnUrl.style.color = 'var(--text)';
                    submitBtn.textContent = 'Generate vCard';
                }
            }
        </script>
        
        <div class="features-mini">
            <div class="feature-slide" style="animation-delay: 0s;">âœ¨ High Quality PNG & SVG</div>
            <div class="feature-slide" style="animation-delay: 2s;">ðŸŒ€ Animated GIF Support</div>
            <div class="feature-slide" style="animation-delay: 4s;">ðŸ“Š Real-time Scan Analytics</div>
        </div>
    </div>
</body>
</html>